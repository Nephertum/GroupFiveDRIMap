<!DOCTYPE html>
<html lang="en">

<head>
  <title>Map prototype</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.16/p5.min.js" type="text/javascript"></script>
  <script src="libraries/mappa.js" type="text/javascript"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.0/mapbox-gl.js"></script>
  <!--jQuery-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!--Bootstrap-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <!--CSS-->
  <link rel="stylesheet" href="styles.css">
  <link rel="shortcut icon" type="image/jpg" href="favicon.png"/>
  <!--Font Awesome-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <div id = "tutorial_container">
    <h1>Map tutorial</h1>
    <button class="btn btn-outline-primary" id="end_tutorial">Skip</button>
    <div id="tutorialStep1">
      <p>Interact with the map By dragging, you can zoom in by scrolling. Click on a location to zoom in and view further details</p>
      <p>You can place a pin on the map by holding down the mouse over a position on the map</p>
      <button id="startStep2" class="btn btn-primary">Next</button>
    </div>
    <div id="tutorialStep2">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-90deg-right" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M14.854 4.854a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 4H3.5A2.5 2.5 0 0 0 1 6.5v8a.5.5 0 0 0 1 0v-8A1.5 1.5 0 0 1 3.5 5h9.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4z"/>
      </svg>
      <p>You can navigate between locations by clicking the Navigate button and entering a room name</p>
      <button id="startStep3" class="btn btn-primary">Next</button>
    </div>
    <div id="tutorialStep3">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
      </svg>
      <p>To view the directions of a current route, click the directions button</p>
      <button id="startStep4" class="btn btn-primary">Next</button>
    </div>
    <div id="tutorialStep4">
      <p>Click this icon to talk to our AI chatbot <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
      </svg></p>
      <button id="startStep5" class="btn btn-primary">Next</button>
    </div>
    <div id="tutorialStep5">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-90deg-right" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M14.854 4.854a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 4H3.5A2.5 2.5 0 0 0 1 6.5v8a.5.5 0 0 0 1 0v-8A1.5 1.5 0 0 1 3.5 5h9.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4z"/>
      </svg>
      <p>Click Login to access the admin page if you are a staff member</p>
      <button id="completeTutorial" class="btn btn-primary">Finish</button>
    </div>
  </div>
  <!-- <h1>DRI Map</h1> -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">DRI Map</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item" id="adminMode">
          <a class="btn btn-outline-success" href="login" role="button">Login</a>
        </li>
        <li class="nav-item">
          <button class="btn btn-outline-primary" id="openNavigateBtn" >Navigate </button>
        </li>
    </ul>
    </div>
  </div>
</nav>
<div id="serverError" class="alert alert-danger" role="alert">
  Unable to connect to server
</div>
<div class="app_container">
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavigation" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasExampleLabel">Navigation</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="errorText" id="roomError">Invalid Locations</p>
      <input id="path1" type="text" placeholder="Enter your current location e.g. Fracture Clinic" />
      <div class="navColumn">
        <button class="btn btn-primary" id="startSpeech1">Start <i class="fa fa-microphone"></i></button>
        <button class="btn btn-primary" id="stopSpeech1" style="display:none;">Stop <i class="fa fa-microphone"></i></button>
        <button id="usePinToggle" class = "btn btn-outline-secondary">Use pin</button>
        <p class="errorText" id="pinError">Pin not placed</p>
      </div>
      <input id="path2" type="text" placeholder="Enter your destination e.g. Outpatients"/>
      <div class="navColumn">
        <button class="btn btn-primary" id="startSpeech2">Start <i class="fa fa-microphone"></i></button>
        <button class="btn btn-primary" id="stopSpeech2" style="display:none;">Stop <i class="fa fa-microphone"></i></button>
      </div>
      <button id="navigateBtn" class="btn btn-primary navBtn" >Navigate</button>
      <button id="clearNavBtn" class="btn btn-outline-secondary navBtn" data-bs-dismiss="offcanvas"> Clear Route</button>
    </div>
  </div>


  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasDirections" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
      <br>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div id='routeStepList'>
        <h3>Directions</h3>
      </div>
    </div>
  </div>
  
  <div class="mt-4">
    <p id="status" style="display: none">Listenting ...</p>
  </div>
  <p id="searchError" class="errorText">Field can't be blank</p>
  <div class="searchInput">
    <input id ="roomSearch" type="text" placeholder="Enter room e.g. Fracture Clinic"><br>
    <button id="SearchBtn" class="btn btn-primary">Find</button>
    
  </div>
  
  
  <div id="mapContainer">
    <button id="directionBtn" class="btn btn-outline-primary" data-bs-toggle="offcanvas" href="#offcanvasDirections" role="button" aria-controls="offcanvasDirections">Directions</button>
    <div id='map'></div><br>
    <div id='roomlist' class="row">
    </div>
  </div>
</div>
<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="footer-col">
        <h4>Sources and Info</h4>
        <ul>
          <li><a href="https://www.dbth.nhs.uk/locations/doncaster-royal-infirmary/">DRI Website</a></li>
          <li><a href="https://oesn11hpbml2xaq003wx02ib-wpengine.netdna-ssl.com/wp-content/uploads/2017/07/150331-Doncaster-Royal-Infirmary-Map.pdf">Static Map</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Github</h4>
        <div class="social-links">
          <a href="https://github.com/Nephertum/GroupFiveDRIMap"><i class="fab fa-github"></i></a>
        </div>
      </div>
    </div>
  </div>
</footer>
  
  
  
  


<script>
  window.watsonAssistantChatOptions = {
      integrationID: "c2875335-500a-4cff-a57f-aab033b9d74d", // The ID of this integration.
      region: "eu-gb", // The region your integration is hosted in.
      serviceInstanceID: "ef486698-edc7-43fa-80ce-d9eb1d236a45", // The ID of your service instance.
      onLoad: function(instance) { instance.render(); }
    };
  setTimeout(function(){
    const t=document.createElement('script');
    t.src="https://web-chat.global.assistant.watson.appdomain.cloud/versions/" + (window.watsonAssistantChatOptions.clientVersion || 'latest') + "/WatsonAssistantChatEntry.js"
    document.head.appendChild(t);
  });
</script>
<script src="map.js"></script>
<script src="speechRecognition.js"></script>
</body>

</html>
