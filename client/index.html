<!DOCTYPE html>
<html lang="en">

<head>
  <title>Map prototype</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.16/p5.min.js" type="text/javascript"></script>
  <script src="libraries/mappa.js" type="text/javascript"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.0/mapbox-gl.js"></script>
  <!--jQuery-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!--Bootstrap-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <!--CSS-->
  <link rel="stylesheet" href="styles.css">
  <link rel="shortcut icon" type="image/jpg" href="favicon.png"/>
  <!--Font Awesome-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
  <!-- <h1>DRI Map</h1> -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">DRI Map</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Map<span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item" id="adminMode">
          <button class="btn btn-outline-success" href="#" role="button">Admin Mode </button>
        </li>
        <li class="nav-item" id="exitAdminMode" style="display: none;">
          <button class="btn btn-outline-success" href="#" role="button">Exit Admin Mode </button>
        </li>
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item">
          <button class="btn btn-outline-primary" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">Navigate </button>
        </li>
    </ul>
    </div>
  </div>
</nav>
  
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasExampleLabel">navigation</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <input id="path1" type="text" placeholder="Enter your current location..." />
    <button id="usePinToggle" class = "btn btn-outline-secondary">Use pin</button>
    <br>
    <input id="path2" type="text" placeholder="Enter your destination..."/><br>
    <button id="navigateBtn" class="btn btn-primary navBtn" data-bs-dismiss="offcanvas">Navigate</button>
    <button id="clearNavBtn" class="btn btn-outline-secondary navBtn" data-bs-dismiss="offcanvas"> Clear Route</button>
  </div>
</div>

<div id="mapContainer">
  <div id="formsForSearching" style="position: relative; top: -50px;">
    <div class="formType1" id='locationInput'>
        <input id ="roomSearch" type="text" placeholder="Enter room..."><br>
        <button id="SearchBtn" class="btn btn-primary">Find</button>
    </div>
    <div class="formType1" id='routeStepList'>
      <h3>Directions</h3>
      <div>
        <span>Volume</span>
        <input type="range" min="0" max="1" value="1" step="0.1" id="volume" />
        <span id="volume-label">1</span>
      </div>
    </div>
  </div>
  <div id='map'></div><br>
  <div id='roomlist' class="row">
    <div class="col-md-3">
    <div class="col-sm" id="wch">
      <h5>Women's and Children's Hospital</h5>
      <h6>Ground Floor (Level 2):</h6>
      <div id="wch2"></div><br>
      <h6>Level 3:</h6>
      <div id="wch3"></div><br>
      <h6>Level 4:</h6>
      <div id="wch4"></div><br>
      <h6>Level 5:</h6>
      <div id="wch5"></div><br>
      <h6>Level 6:</h6>
      <div id="wch6"></div><br>
    </div>
  </div>
  
  <div class="col-md-3">
    <div class="col-sm" id="wb">
      <h5>West Block</h5>
      <h6>Ground Floor (Level 2):</h6>
      <div id="wb2"></div><br>
      <h6>Level 3:</h6>
      <div id="wb3"></div><br>
      <h6>Level 4:</h6>
      <div id="wb4"></div><br>
      <h6>Level 5:</h6>
      <div id="wb5"></div><br>
    </div>
    </div>

    <div class="col-md-3">
    <div class="col-sm" id="sb">
      <h5>South Block</h5>
      <h6>Level 1:</h6>
      <div id="sb1"></div><br>
      <h6>Level 2:</h6>
      <div id="sb2"></div><br>
      <h6>Level 3:</h6>
      <div id="sb3"></div><br>
      <h6>Level 4:</h6>
      <div id="sb4"></div><br>
      <h6>Level 5:</h6>
      <div id="sb5"></div><br>
    </div>
    </div>

    <div class="col-md-3">
    <div class="col-sm" id="eb">
      <h5>East Block</h5>
      <h6>Ground Floor (Level 2):</h6>
      <div id="eb2"></div><br>
      <h6>Level 3:</h6>
      <div id="eb3"></div><br>
      <h6>Level 4:</h6>
      <div id="eb4"></div><br>
      <h6>Level 5:</h6>
      <div id="eb5"></div><br>
      <h6>Level 6:</h6>
      <div id="eb6"></div><br>
      <h6>Level 7:</h6>
      <div id="eb7"></div><br>
      <h6>Level 8:</h6>
      <div id="eb8"></div><br>
      <h6>Level 9:</h6>
      <div id="eb9"></div><br>
    </div>
    </div>

  </div>
</div>
<div id="adminTabs" style="display: none;">
<!--Tabs-->
<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#newlocationtab" type="button" role="tab" aria-controls="home" aria-selected="true">New Location</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#edittab" type="button" role="tab" aria-controls="profile" aria-selected="false">Edit Locations</button>
  </li>
</ul>
<!-- Tab Content -->
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="newlocationtab" role="tabpanel" aria-labelledby="home-tab">
    <div class="row">
      <div class="col-sm">
        <h2>Add New Location to Map</h2>
        <form name="newPlaceForm" class="formType2" id="newPlaceForm">
          <p>Select a category:</p>
          <input type="radio" id="catE" name="category" value="entrance">
          <label for="catE">Entrance</label>
          <input type="radio" id="catR" name="category" value="room">
          <label for="catR">Room</label>
          <input type="radio" id="catB" name="category" value="building">
          <label for="catB">Building</label><br><br>
          <label for="newName">Name: </label><br>
          <input type="text" name="newName" id="newName" required><br>
          <label for="newLocation">Location: <br><i>Enter in format: lat, lng</i></label><br>
          <input type="text" name="newLocation" id="newLocation" required><br>
          <label for="newDescription" class="roomOnly">Description:<br></label>
          <input type="text" name="newDescription" id="newDescription" class="roomOnly"><br class="roomOnly">
          <label for="newHoursWeek" class="roomOnly">Opening Hours During Week:<br></label>
          <div class="timeRange">
            <input type="time" id="newHoursWeekStart" class="roomOnly" value="09:00"><br class="roomOnly">
            <h3 class="roomOnly">-></h3>
            <input type="time" id="newHoursWeekEnd" class="roomOnly" value="17:00"><br class="roomOnly">
          </div>
          <label for="newHoursWeekend" class="roomOnly">Opening Hours During Weekend:<br></label>
          <div class="timeRange">
            <input type="time" id="newHoursWeekendStart" class="roomOnly" value="09:00"><br class="roomOnly">
            <h3 class="roomOnly">-></h3>
            <input type="time" id="newHoursWeekendEnd" class="roomOnly" value="17:00"><br class="roomOnly">
          </div>
          <label for="newImg" class="roomOnly">Image File Name:<br></label>
          <input type="text" name="newImg" id="newImg" class="roomOnly"><br>
          <button class="btn btn-primary" id="newPlaceBtn">Submit</button>
        </form>
      </div>
      <div class="col-sm">
          <h2>Location Finder Tool</h2>
          <h6><i>Click on any location to get its coordinates</i></h6>
          <p>Location clicked:</p>
          <p id="coordinates"></p>
          <button onclick="copyText('coordinates')" class="btn btn-primary">Copy cooridinates</button><br><br>
          <button onclick="fillLocationInput('coordinates')" class="btn btn-primary">Enter into form</button><br><br>
      </div>
    </div>
  </div>
  <div class="tab-pane fade" id="edittab" role="tabpanel" aria-labelledby="profile-tab">
    <div class="row">
      <form name="searchIdForm" onSubmit="findId(event)" id="searchIdForm">
        <div>
            <label for="placeName">Search for a place's id </label>
            <input type="text" name="placeName" required>
        </div>
        <div>
            <input type="submit" class="btn btn-primary" value="Find!">
        </div>
        <p>Search results:</p>
        <p id="sResults"></p><br>
    </form>
    </div>
    <div class="row">
      <div class="col-sm">
    <h2>Edit Existing Location</h2>
    <form name="editPlaceForm" class="formType2" id="editPlaceForm">
      <p>Select a category:</p>
          <input type="radio" id="catE2" name="category" value="entrance">
          <label for="catE2">Entrance</label>
          <input type="radio" id="catR2" name="category" value="room">
          <label for="catR2">Room</label>
          <input type="radio" id="catB2" name="category" value="building">
          <label for="catB2">Building</label><br><br>
          <label for="IdOfEdit">Enter location id: </label><br>
          <input type="text" name="IdOfEdit" id="IdOfEdit" required><br>
        <p>Select property to edit:</p>
          <input type="radio" id="editName" class="textFormat" name="property" value="name">
          <label for="editName">Name</label><br>
          <input type="radio" id="editLocation" class="locationFormat" name="property" value="location">
          <label for="editLocation">Location</label><br>
          <div class="roomOnly2">
          <input type="radio" id="editDescription" class="textFormat" name="property" value="description">
          <label for="editDescription">Description</label><br>
          <input type="radio" id="editHours" class="hoursFormat" name="property" value="hours">
          <label for="editHours">Opening Hours</label><br>
          <input type="radio" id="editImg" class="textFormat" name="property" value="img">
          <label for="editImg">Image File Name</label><br></div><br>

        <label for="editNewValue">Enter new value: <i id="formatIndicator"></i></label><br>
          <input type="text" name="editNewValue" id="editNewValue" required><br>
        
        <button type="submit" id="editPlaceBtn" class="btn btn-primary">Submit</button>
    </form>
    </div>
    <div class="col-sm">
      <h1>Delete a Location</h1>
      <form name="deletePlaceForm" class="formType2" id="deletePlaceForm">
          <label for="IdOfDelete">Enter location id: </label><br>
          <input type="text" name="IdOfDelete" id="IdOfDelete" required><br>

          <p>Select deletion method:</p>
          <input type="radio" id="archiveDelete" name="deleteType" value="archive">
          <label for="archiveDelete">Archive location</label><br>
          <input type="radio" id="fullDelete" name="deleteType" value="full">
          <label for="fullDelete">Permanently delete location</label><br>
          <button class="btn btn-danger" id="deletePlaceBtn">Delete</button>
      </form>
      <br>
      <h2>Restore a Location</h2>
      <form action="http://127.0.0.1:8090/entities/restore" method="post" name="restoreForm" class="formType2" id="restoreForm">
          <label for="IdOfRestore">Enter id (from archive): </label><br>
          <input type="text" name="IdOfRestore" id="IdOfRestore" required><br>
          <button type="submit" class="btn btn-primary">Restore</button>
      </form>
    </div>
    </div>
  </div>
</div>
</div>
</div>



<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="exampleModalLabel">Success</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
That change was successfully saved
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
</div>
</div>
</div>
<script>
  window.watsonAssistantChatOptions = {
      integrationID: "c2875335-500a-4cff-a57f-aab033b9d74d", // The ID of this integration.
      region: "eu-gb", // The region your integration is hosted in.
      serviceInstanceID: "ef486698-edc7-43fa-80ce-d9eb1d236a45", // The ID of your service instance.
      onLoad: function(instance) { instance.render(); }
    };
  setTimeout(function(){
    const t=document.createElement('script');
    t.src="https://web-chat.global.assistant.watson.appdomain.cloud/versions/" + (window.watsonAssistantChatOptions.clientVersion || 'latest') + "/WatsonAssistantChatEntry.js"
    document.head.appendChild(t);
  });
</script>
  <script src="mapTest.js"></script>
  <script src="admin.js"></script>
</body>

</html>
